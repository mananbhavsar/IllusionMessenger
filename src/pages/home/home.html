<ion-header no-border>
    <header [title]="'HomeScreen._Home_' | translate" [buttons]="[{icon:'ios-flash',name:'flash'}]" (buttonClicked)="headerButtonClicked($event)"></header>
    <div class="device-register" [ngSwitch]="deviceRegsiter">
        <span class="gray" *ngSwitchCase="0">Not Connected</span>
        <span class="pickup" *ngSwitchCase="1">Connecting</span>
        <span class="secondary" *ngSwitchCase="2">Last connected at {{connectedTime | time}}</span>
    </div>
</ion-header>
<ion-content no-padding>
    <ion-refresher (ionRefresh)="refresh($event)">
        <ion-refresher-content pullingIcon="arrow-round-down" pullingText="Pull to refresh" refreshingSpinner="crescent" refreshingText="Refreshing...">
        </ion-refresher-content>
    </ion-refresher>
    <center-spinner *ngIf="groups !== -1 && groups.length === 0;else groups_template"></center-spinner>
    <empty *ngIf="flashNews.length === 0 && groups === -1"></empty>
    <ng-template #groups_template>
        <flash-news [flashNews]="flashNews"></flash-news>
        <ion-list *ngIf="groups !== -1">
            <ion-item-divider *ngIf="flashNews && flashNews.length" color="light">
                Groups
            </ion-item-divider>
            <ion-searchbar (ionInput)="getItems($event)" [hidden]="searchBtnShow" (ionCancel)="cancel()"></ion-searchbar>
            <ion-item *ngFor="let group of groups" (click)="openGroup(group.GroupID,group.Group)">
                <h2>
                    {{group.Group}}
                    <span float-right>
                        <ion-badge *ngIf="getBadge(group.GroupCode)">{{badges[group.GroupCode]}}</ion-badge>
                    </span>
                </h2>
                <p>
                    <ion-row>
                        <ion-col text-start class="activetopics" *ngIf="group.ActiveTopics > 0">
                            <ion-icon name="ios-alarm"></ion-icon> {{group.ActiveTopics}} {{'due' + (group.ActiveTopics > 1 ? 's' : '')}}
                        </ion-col>
                        <ion-col text-center class="responsibletopics" *ngIf="group.ResponsibleCount && group.ResponsibleCount > 0">
                            <ion-icon name="ios-star"></ion-icon> {{group.ResponsibleCount}} assigned
                        </ion-col>
                        <ion-col text-end class="overdue" *ngIf="group.OverDueTopics > 0">
                            <ion-icon name="ios-alert"></ion-icon> {{group.OverDueTopics}} {{'over-due' + (group.OverDueTopics > 1 ? 's' : '')}}
                        </ion-col>
                    </ion-row>
                </p>
                <ion-icon name="ios-arrow-forward" item-end></ion-icon>
            </ion-item>
        </ion-list>
    </ng-template>
</ion-content>